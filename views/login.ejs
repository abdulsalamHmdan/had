<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام الحجوزات-هاد</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');

        * {
            font-family: 'Cairo', sans-serif;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #f3f4e6 0%, #989948 100%);
        }

        .card-shadow {
            box-shadow: 0 20px 25px -5px rgba(43, 59, 67, 0.08), 0 10px 10px -5px rgba(152, 153, 72, 0.04);
        }

        .input-focus:focus {
            border-color: #989948;
            box-shadow: 0 0 0 3px rgba(152, 153, 72, 0.15);
        }

        .error-message {
            animation: shake 0.5s ease-in-out;
        }

        #cont {
            padding-top: 0;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }
    </style>
</head>

<body class="gradient-bg min-h-screen flex items-center justify-center p-4">
    <div id="cont" class="bg-white rounded-2xl card-shadow w-full max-w-md p-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <img style="width: 366px;margin-inline: auto;margin-bottom: 15px;" src="logo.png">
            <h1 class="text-2xl font-bold mb-4" style="color:#2b3b43;">تسجيل الدخول</h1>
        </div>

        <!-- Login Form -->
        <form id="loginForm" class="space-y-6" action="/hjz">
            <!-- Login Button -->
            <div>
                <label for="username" class="block text-sm font-medium text-gray-700 mb-2">اسم المستخدم</label>
                <input type="text" id="username" name="username"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200 text-right"
                    placeholder="أدخل رقم الهوية" required>
                <div id="usernameError" class="text-red-500 text-sm mt-1 hidden error-message"></div>
            </div>

            <!-- Password Field -->
            <div>
                <label for="password" class="block text-sm font-medium text-gray-700 mb-2">كلمة المرور</label>
                <div class="relative">
                    <input type="password" id="password" name="password"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition-all duration-200 text-right pr-12"
                        placeholder="أدخل كلمة المرور" required>
                    <button type="button" id="togglePassword"
                        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors">
                        👁️
                    </button>
                </div>
                <div id="passwordError" class="text-red-500 text-sm mt-1 hidden error-message"></div>
            </div>
            <button type="submit" id="loginBtn"
                class="w-full bg-[#2b3b43] text-white py-3 px-4 rounded-lg font-medium hover:bg-[#989948] hover:text-[#2b3b43] transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed">
                <span id="loginBtnText">تسجيل الدخول</span>
            </button>

            <!-- Sign Up Link -->
            <div class="text-center">
                <p class="text-sm" style="color:#2b3b43;">
                    <a href="/" id="signUpLink" class="font-medium transition-colors" style="color:#2b3b43;">العودة الى
                        <span style="color:#989948;">صفحة الحجوزات</span></a>
                </p>
            </div>
        </form>
    </div>
    <script>
        const togglePassword = document.getElementById('togglePassword');
        const passwordInput = document.getElementById('password');

        togglePassword.addEventListener('click', function () {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.textContent = type === 'password' ? '👁️' : '🙈';
        });

        // Form validation and submission
        const loginForm = document.getElementById('loginForm');
        const loginBtn = document.getElementById('loginBtn');
        const loginBtnText = document.getElementById('loginBtnText');
        const usernameInput = document.getElementById('username');
        const usernameError = document.getElementById('usernameError');
        const passwordError = document.getElementById('passwordError');

        function showError(element, message) {
            element.textContent = message;
            element.classList.remove('hidden');
            element.parentElement.querySelector('input').classList.add('border-red-500');
        }

        function hideError(element) {
            element.classList.add('hidden');
            element.parentElement.querySelector('input').classList.remove('border-red-500');
        }

        function validateForm() {
            let isValid = true;

            // Reset errors
            hideError(usernameError);
            hideError(passwordError);

            // Validate username
            if (usernameInput.value.trim() === '') {
                showError(usernameError, 'يرجى إدخال اسم المستخدم');
                isValid = false;
            } else if (usernameInput.value.trim().length < 3) {
                showError(usernameError, 'اسم المستخدم يجب أن يكون 3 أحرف على الأقل');
                isValid = false;
            }

            // Validate password
            if (passwordInput.value === '') {
                showError(passwordError, 'يرجى إدخال كلمة المرور');
                isValid = false;
            } else if (passwordInput.value.length < 3) {
                showError(passwordError, 'كلمة المرور يجب أن تكون 6 أحرف على الأقل');
                isValid = false;
            }

            return isValid;
        }

        loginForm.addEventListener('submit', function (e) {
            e.preventDefault();

            if (!validateForm()) {
                return;
            }

            // Show loading state
            loginBtn.disabled = true;
            loginBtn.classList.add('btn-loading');
            loginBtnText.textContent = 'جارٍ التحقق...';


            // Simulate successful login
            loginBtnText.textContent = 'تم بنجاح! ✓';
            let pass = passwordInput.value.trim();
            if (pass.length == 10 && pass.startsWith("0")) {
                pass = pass.slice(1, 10)
            } else if (pass.length == 12 && pass.startsWith("966")) {
                pass = pass.slice(3, 12)
            }
            var data = new URLSearchParams();
            data.append('user', usernameInput.value);
            data.append("pass", pass);
            fetch("login", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
                },
                body: data
            })
                .then((response) => {
                    return response.text()
                })
                .then((data) => {
                    if (data == "exist") {
                        location.reload();
                    }
                    else {
                        loginBtn.disabled = false;
                        loginBtn.classList.remove('btn-loading');
                        loginBtnText.textContent = 'دخول';
                        alert("المستخدم غير موجود")
                    }
                })
        });

        // Real-time validation
        usernameInput.addEventListener('input', function () {
            if (this.value.trim() !== '') {
                hideError(usernameError);
            }
        });

        passwordInput.addEventListener('input', function () {
            if (this.value !== '') {
                hideError(passwordError);
            }
        });

        // Handle forgot password
        document.getElementById('forgotPassword').addEventListener('click', function (e) {
            e.preventDefault();
            window.open("https://wa.me/966581334216?text=اواجه مشكلة في تسجيل الدخول");
        });
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'97faf593830dea75',t:'MTc1Nzk2OTAzNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>    
    </script>
</body>

</html>